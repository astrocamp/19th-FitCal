{% extends 'layouts/default.html' %} {% block main %}
<div class="p-4 space-y-6">
  <!-- åº—å®¶è³‡è¨Šå€å¡Š -->
  <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
    <!-- LOGO -->
    <img src="{{ store.logo_url|default:'https://fakeimg.pl/50x50/' }}" alt="åº—å®¶ Logo" class="w-24 h-24 rounded-lg object-cover border" />

    <!-- å•†å®¶è©³ç´°è³‡è¨Š -->
    <div class="space-y-1 mb-7">
      <div class="flex items-center gap-2 text-xl font-bold">
        <span>{{ store.name }}</span>
        <span class="text-yellow-500">â­ {{ store.rating }}</span>
      </div>
      <div class="text-sm text-gray-600">ç‡Ÿæ¥­æ™‚é–“ï¼š{{ store.opening_time }}<span>~</span>{{ store.closing_time }}</div>
      <div class="text-sm text-gray-600">
        <span>è·é›¢ï¼š2.1 å…¬é‡Œ</span>ã€€ï½œã€€ <a href="https://www.google.com/maps/search/?api=1&query={{ store.name|urlencode }}+near+" class="font-bold text-blue-600 hover:underline">{{ store.address }}</a>ã€€ï½œã€€ ğŸ“
        <a href="tel:{{ store.phone_number|cut:'-' }}" class="font-bold text-blue-600 hover:underline">{{ store.phone_number }}</a>
      </div>
    </div>
  </div>
  {% if user.is_store and store == user.store %}
  <form action="{% url 'stores:delete' store.id %}" method="post" onsubmit="return confirm('æ˜¯å¦ç¢ºèªåˆªé™¤å¸³è™Ÿèˆ‡åº—å®¶ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼')">
    {% csrf_token %}
    <button type="submit" class="btn">åˆªé™¤å¸³è™Ÿ</button>
  </form>
  <a href="{% url 'products:new' store.id %}" class="btn btn-primary"> æ–°å¢å•†å“ </a>
  {% endif %}
  <!-- å•†å“åˆ—è¡¨ -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    {% for product in products %}
    <a href="{% url 'products:show' product.id %}">
      <div class="bg-white rounded-xl shadow-md overflow-hidden relative">
        <!-- å•†å“åœ–ç‰‡ -->
        <div class="relative">
          <img src="{{ product.image.url|default:'https://fakeimg.pl/400x250' }}" alt="å•†å“åœ–ç‰‡" class="w-full h-48 object-cover" />

          <!-- æ”¶è—æŒ‰éˆ• -->
          <div x-data class="absolute top-2 right-2 p-1.5 rounded-full hover:bg-red-50 cursor-pointer flex items-center" @click.stop>{% include "shared/collections_btn.html" with store=store member=user.member %}</div>
        </div>

        <!-- å•†å“è³‡è¨Š -->
        <div class="p-4">
          <h3 class="text-lg font-semibold">{{ product.name }}</h3>
          <p class="text-sm text-gray-600">åƒ¹æ ¼ï¼š${{ product.price }}</p>
          <p class="text-sm text-gray-600">å¡è·¯é‡Œï¼š{{ product.calories }} kcal</p>
          <!-- ç›®å‰æ˜¯å‡æŒ‰éˆ•ï¼Œå¾…å¾ŒçºŒæ•´åˆ -->
          <button class="mt-2 w-full bg-green-500 hover:bg-green-600 text-white py-1.5 rounded-md text-sm">åŠ å…¥è³¼ç‰©è»Š</button>
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
</div>
{% endblock main %}
