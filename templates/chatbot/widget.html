{% load static %}
<script src="{% static 'assets/scripts/chatbot.js' %}" defer></script>
<!--  浮動按鈕 -->
<button onclick="toggleChatbox()" class="fixed bottom-6 right-6 z-50 bg-green-700 hover:bg-green-800 text-black rounded-full p-4 shadow-lg">🤖</button>

<!-- 💬 聊天視窗 -->
<div id="chatbox" class="fixed bottom-24 right-6 w-80 max-h-[70vh] bg-white border rounded-xl shadow-xl overflow-hidden flex-col hidden z-50">
  <!-- 標題列 -->
  <div class="bg-green-700 px-4 py-2 font-semibold flex justify-between items-center text-sm">
    <span>FitCal智慧客服小幫手</span>
    <button onclick="toggleChatbox()" class="hover:opacity-60">✕</button>
  </div>

  <!-- 訊息區 -->
  <div id="chatbot-messages" class="h-[300px] flex-1 overflow-y-auto px-4 py-2 text-sm space-y-2 bg-gray-50">
    <div class="inline-block bg-gray-200 px-3 py-2 rounded-lg my-1 max-w-[70%]">👋您好，我是 FitCal 智慧客服，有什麼可以幫您？</div>
  </div>

  <!-- 輸入區 -->
  <div class="border-t px-3 py-2 bg-white flex items-center gap-2">
    <form id="chatbot-form" onsubmit="sendMessage(event)" class="flex items-center gap-2 w-full">
      <!-- CSRF token -->
      {% csrf_token %}

      <!-- 輸入訊息 -->
      <input type="text" name="message" id="chatbot-input" class="flex-1 border rounded px-3 py-1 text-sm focus:outline-none" placeholder="輸入訊息..." required />
      <button type="submit" class="bg-green-700 hover:bg-green-800 px-3 py-1 rounded text-sm text-white">送出</button>
    </form>
  </div>
</div>
